## 4.7 路由协议 

### 1. RIP

​	路由协议是最早使用的距离矢量路由协议。

​	RIP协议基于UDP，端口**520**。

​	好的路由协议必须能快速收敛，收敛就是网络设备的路由表与网络拓扑结构保持一致，所有的路由器再判断最佳路由达到一致的过程。

​	问题：距离矢量协议容易形成路由循环，好消息传递的快，坏消息传递的慢等问题。解决措施如下：

- 水印分割
- 抑制定时器
- 路由中毒
- 触发更新
- 反向中毒



### 2. OSPF 

​	开放式最短如今又想（**OSPF**）是一个内部网关协议（**IGP**），用于在单一自治系统（**AS**）内决策路由。

​	OSPF才用Dijkstra的最短路径优先算法（**SPF**）计算最小生成树。



### 3. BGP

​	BGP是网关协议，vBGP4。是一种增强的距离矢量路由协议。运行在不同的AS的路由之间，用于选择 AS之间话费最小的协议。

​	基于TCP协议，端口为**179**。BGP4+支持IPv6。

​	BGP特点：

​	（1）不用周期性发送路由消息

​	（2）路由变化，发送增量路由

​	（3）周期性发送KEEPALIVE报文校验TCP的连通性

​	BGP工作流程：略



### 4. IGMP

​	Internet组管理协议（IGM）是一个组播协议。该协议运行在主机和组播路由器之间，

​	IGMP提供了在转发组播数据包到目的地的最后阶段所需的信息。



